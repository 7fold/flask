SET time_zone = "America/Toronto";

use texada;


CREATE TABLE `products` (
  `_id` int(11) PRIMARY KEY NOT NULL,
  `name` varchar(255) NOT NULL
);


INSERT INTO `products` (`_id`, `name`) VALUES
(1, 'Cesna 120'),
(2, 'DC-6 Twin Otter'),
(3, 'Piper M600'),
(4, 'Art Boom 6500');



CREATE TABLE `locations` (
  `record_id` int(11) PRIMARY KEY AUTO_INCREMENT NOT NULL,
  `product_id` int(11) NOT NULL,
  `datetime` datetime NOT NULL,
  `longitude` float(10,7) NOT NULL,
  `latitude` float(10,7) NOT NULL,
  `elevation` int(5) NOT NULL
);

ALTER TABLE `locations`
  ADD KEY `product_id` (`product_id`);


ALTER TABLE `locations` ADD CONSTRAINT `fk_prod_id` FOREIGN KEY (`product_id`) REFERENCES `products` (`_id`) ON DELETE NO ACTION ON UPDATE NO ACTION;


INSERT INTO locations
  (product_id, datetime, longitude, latitude, elevation)
VALUES
  (1, '2016-10-12T12:00:00.000001', 43.2583264, -81.8149807, 500),
  (1, '2016-10-13T12:00:00.000001', 42.559112, -79.286693, 550),
  (1, '2016-10-14T12:00:00.000001', 43.559112, -85.286693, 600),
  (1, '2016-10-15T12:00:00.000001', 42.3119735, -83.0941179, 650),
  (2, '2016-10-12T12:00:00.000001', 43.459112, -80.386693, 500),
  (2, '2016-10-13T12:00:00.000001', 42.459112, -79.386693, 450),
  (2, '2016-10-14T12:00:00.000001', 44.459112, -81.386693, 400),
  (2, '2016-10-15T12:00:00.000001', 43.2583264, -81.8149807, 500),
  (3, '2016-10-15T12:00:00.000001', 44.459112, -81.386693, 500),
  (3, '2016-10-15T12:00:00.000001', 45.459112, -82.386693, 600),
  (3, '2016-10-15T12:00:00.000001', 46.459112, -83.386693, 700),
  (3, '2016-10-15T12:00:00.000001', 47.459112, -84.386693, 800),
  (3, '2016-10-15T12:00:00.000001', 48.459112, -85.386693, 900),
  (4, '2017-08-04T14:20:38.000001', 43.7634618, -79.3688191, 800),
  (4, '2017-08-04T16:20:38.000001', 43.8001468, -79.2342365, 400),
  (4, '2017-08-04T14:20:38.000001', 44.51165, -80.1239422, 550),
  (4, '2017-08-04T14:20:38.000001', 43.1501439, -79.0504945, 300);

